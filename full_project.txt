========================================
File: App.xaml
========================================
<?xml version = "1.0" encoding = "UTF-8" ?>
<Application xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MauiProject"
             x:Class="MauiProject.App">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Styles/Colors.xaml" />
                <ResourceDictionary Source="Resources/Styles/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application>

========================================
File: App.xaml.cs
========================================
namespace MauiProject;

public partial class App : Application
{
    public App()
    {
        InitializeComponent();

        // Проверяем, проходил ли пользователь регистрацию
        bool hasProfile = Preferences.ContainsKey("UserName");
        if (hasProfile)
        {
            MainPage = new AppShell(); // Сразу в приложение
        }
        else
        {
            // Если первый раз — показываем регистрацию (без Shell, просто страница)
            MainPage = new NavigationPage(new WelcomePage()); 
        }
    }
}
========================================
File: AppShell.xaml
========================================
<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="MauiProject.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:MauiProject"
    xmlns:bio="clr-namespace:BioLogicNative"
    Title="MauiProject">

    <ShellContent
        Title="Home"
        ContentTemplate="{DataTemplate bio:StartPage}"
        Route="StartPage" />

</Shell>

========================================
File: AppShell.xaml.cs
========================================
namespace MauiProject;

public partial class AppShell : Shell
{
	public AppShell()
	{
		InitializeComponent();
        Routing.RegisterRoute(nameof(BioLogicNative.ResultPage), typeof(BioLogicNative.ResultPage));
        Routing.RegisterRoute(nameof(BioLogicNative.SummaryPage), typeof(BioLogicNative.SummaryPage));
        Routing.RegisterRoute(nameof(BioLogicNative.StartPage), typeof(BioLogicNative.StartPage));
        Routing.RegisterRoute(nameof(MauiProject.MainPage), typeof(MauiProject.MainPage));
	}
}

========================================
File: BioPage.xaml
========================================
<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiProject.BioPage"
             BackgroundColor="#121212"
             Title="ÐšÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ°">

    <ScrollView>
        <StackLayout Spacing="25" Padding="20">
            <Label Text="ÐšÐ°Ð»Ð¸Ð±Ñ€Ð¾Ð²ÐºÐ° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹" 
                   TextColor="White" 
                   FontSize="28" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center"/>

            <!-- Section 1: Gender -->
            <Label Text="ÐŸÐ¾Ð»" TextColor="Gray" FontSize="14" FontAttributes="Bold"/>
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                <!-- Male Card -->
                <Border x:Name="MaleCard" Stroke="#333333" BackgroundColor="#1E1E1E" StrokeShape="RoundRectangle 15" Padding="20">
                    <VerticalStackLayout HorizontalOptions="Center">
                        <Label Text="Ðœ" FontSize="30" TextColor="White" HorizontalOptions="Center"/>
                        <Label Text="ÐœÑƒÐ¶ÑÐºÐ¾Ð¹" FontSize="12" TextColor="Gray" HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnMaleSelected"/>
                    </Border.GestureRecognizers>
                </Border>
                
                <!-- Female Card -->
                <Border x:Name="FemaleCard" Stroke="#333333" BackgroundColor="#1E1E1E" StrokeShape="RoundRectangle 15" Padding="20" Grid.Column="1">
                    <VerticalStackLayout HorizontalOptions="Center">
                        <Label Text="Ð–" FontSize="30" TextColor="White" HorizontalOptions="Center"/>
                        <Label Text="Ð–ÐµÐ½ÑÐºÐ¸Ð¹" FontSize="12" TextColor="Gray" HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnFemaleSelected"/>
                    </Border.GestureRecognizers>
                </Border>
            </Grid>

            <!-- Section 2: Activity -->
            <Label Text="ÐÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ" TextColor="Gray" FontSize="14" FontAttributes="Bold" Margin="0,10,0,0"/>
            <Border Stroke="#333333" BackgroundColor="#1E1E1E" StrokeShape="RoundRectangle 15" Padding="15">
                <VerticalStackLayout>
                    <Label x:Name="ActivityLabel" Text="ÐžÑ„Ð¸Ñ (Ð¡Ð¸Ð´ÑÑ‡Ð¸Ð¹)" TextColor="#4CAF50" HorizontalOptions="Center" FontAttributes="Bold" FontSize="16"/>
                    <Slider x:Name="ActivitySlider" 
                            Minimum="0" Maximum="2" 
                            ValueChanged="OnActivityChanged"
                            MinimumTrackColor="#4CAF50" 
                            ThumbColor="#6200EE"/>
                </VerticalStackLayout>
            </Border>

            <!-- Section 3: Risk Factors -->
            <Label Text="Ð¤Ð°ÐºÑ‚Ð¾Ñ€Ñ‹ Ñ€Ð¸ÑÐºÐ°" TextColor="Gray" FontSize="14" FontAttributes="Bold" Margin="0,10,0,0"/>
            <FlexLayout Wrap="Wrap" JustifyContent="Start" AlignItems="Start" Direction="Row">
                <!-- Chips (Buttons acting as chips) -->
                <!-- Alcohol -->
                <Button x:Name="RiskAlcohol" Text="ÐÐ»ÐºÐ¾Ð³Ð¾Ð»ÑŒ" Clicked="OnRiskToggled" Style="{StaticResource RiskChipStyle}"/>
                <!-- Smoking -->
                <Button x:Name="RiskSmoking" Text="ÐšÑƒÑ€ÐµÐ½Ð¸Ðµ" Clicked="OnRiskToggled" Style="{StaticResource RiskChipStyle}"/>
                <!-- Stress -->
                <Button x:Name="RiskStress" Text="Ð¡Ñ‚Ñ€ÐµÑÑ" Clicked="OnRiskToggled" Style="{StaticResource RiskChipStyle}"/>
                <!-- Sleep -->
                <Button x:Name="RiskSleep" Text="ÐœÐ°Ð»Ð¾ ÑÐ½Ð°" Clicked="OnRiskToggled" Style="{StaticResource RiskChipStyle}"/>
            </FlexLayout>

            <!-- Finish Button -->
            <Button Text="Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÑƒ" 
                    BackgroundColor="#4CAF50" 
                    TextColor="White" 
                    CornerRadius="25" 
                    HeightRequest="55" 
                    FontAttributes="Bold"
                    Margin="0,20,0,0"
                    Clicked="OnFinishClicked"/>

        </StackLayout>
    </ScrollView>
    
    <ContentPage.Resources>
        <Style x:Key="RiskChipStyle" TargetType="Button">
            <Setter Property="BackgroundColor" Value="#1E1E1E"/>
            <Setter Property="TextColor" Value="Gray"/>
            <Setter Property="BorderColor" Value="#333333"/>
            <Setter Property="BorderWidth" Value="1"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="HeightRequest" Value="40"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,0,5,5"/>
            <Setter Property="Padding" Value="15,0"/>
        </Style>
    </ContentPage.Resources>
</ContentPage>

========================================
File: BioPage.xaml.cs
========================================
namespace MauiProject;

public partial class BioPage : ContentPage
{
    private string _selectedGender = "Male"; // Default
    private string _activityLevel = "Low";
    
    // Risk factors state
    private bool _hasAlcohol = false;
    private bool _hasSmoking = false;
    private bool _hasStress = false;
    private bool _hasSleepIssues = false;

    public BioPage()
    {
        InitializeComponent();
        UpdateGenderUI();
    }

    private void OnMaleSelected(object sender, TappedEventArgs e)
    {
        _selectedGender = "Male";
        UpdateGenderUI();
    }

    private void OnFemaleSelected(object sender, TappedEventArgs e)
    {
        _selectedGender = "Female";
        UpdateGenderUI();
    }

    private void UpdateGenderUI()
    {
        bool isMale = _selectedGender == "Male";
        
        MaleCard.Stroke = isMale ? Color.FromArgb("#4CAF50") : Color.FromArgb("#333333");
        MaleCard.BackgroundColor = isMale ? Color.FromArgb("#2E2E2E") : Color.FromArgb("#1E1E1E");
        
        FemaleCard.Stroke = !isMale ? Color.FromArgb("#4CAF50") : Color.FromArgb("#333333");
        FemaleCard.BackgroundColor = !isMale ? Color.FromArgb("#2E2E2E") : Color.FromArgb("#1E1E1E");
    }

    private void OnActivityChanged(object sender, ValueChangedEventArgs e)
    {
        int step = (int)Math.Round(e.NewValue);
        switch (step)
        {
            case 0:
                ActivityLabel.Text = "ÐžÑ„Ð¸Ñ (Ð¡Ð¸Ð´ÑÑ‡Ð¸Ð¹)";
                _activityLevel = "Low";
                break;
            case 1:
                ActivityLabel.Text = "Ð—Ð°Ð» 2-3 Ñ€Ð°Ð·Ð° (Ð¡Ñ€ÐµÐ´Ð½ÑÑ)";
                _activityLevel = "Medium";
                break;
            case 2:
                ActivityLabel.Text = "ÐÑ‚Ð»ÐµÑ‚ (Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ)";
                _activityLevel = "High";
                break;
        }
    }

    private void OnRiskToggled(object sender, EventArgs e)
    {
        if (sender is Button btn)
        {
            // Determine which risk factor
            bool isSelected = false;

            if (btn == RiskAlcohol) { _hasAlcohol = !_hasAlcohol; isSelected = _hasAlcohol; }
            else if (btn == RiskSmoking) { _hasSmoking = !_hasSmoking; isSelected = _hasSmoking; }
            else if (btn == RiskStress) { _hasStress = !_hasStress; isSelected = _hasStress; }
            else if (btn == RiskSleep) { _hasSleepIssues = !_hasSleepIssues; isSelected = _hasSleepIssues; }

            // Update UI for this button
            if (isSelected)
            {
                btn.BackgroundColor = Color.FromArgb("#2E2E2E");
                btn.TextColor = Colors.White;
                btn.BorderColor = Color.FromArgb("#6200EE");
            }
            else
            {
                btn.BackgroundColor = Color.FromArgb("#1E1E1E");
                btn.TextColor = Colors.Gray;
                btn.BorderColor = Color.FromArgb("#333333");
            }
        }
    }

    private void OnFinishClicked(object sender, EventArgs e)
    {
        // Save Preferences
        Preferences.Set("Gender", _selectedGender);
        Preferences.Set("ActivityLevel", _activityLevel);
        
        var badHabits = new List<string>();
        if (_hasAlcohol) badHabits.Add("Alcohol");
        if (_hasSmoking) badHabits.Add("Smoking");
        if (_hasStress) badHabits.Add("Stress");
        if (_hasSleepIssues) badHabits.Add("SleepIssues");
        
        // Save complex object (simplified as comma separated string or individual bools for now)
        // Ideally serialize to UserProfile, but user asked for Preferences.Set logic.
        Preferences.Set("Risk_Alcohol", _hasAlcohol);
        Preferences.Set("Risk_Smoking", _hasSmoking);
        Preferences.Set("Risk_Stress", _hasStress);
        Preferences.Set("Risk_Sleep", _hasSleepIssues);

        // Mark onboarding as complete (optional but good practice)
        Preferences.Set("OnboardingFinished", true);

        // RESET NAVIGATION TO MAIN APP
        Application.Current.MainPage = new AppShell();
    }
}

========================================
File: MainPage.xaml
========================================
<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:BioLogicNative.Models"
             x:Class="MauiProject.MainPage"
             BackgroundColor="#121212">
    <Grid RowDefinitions="Auto, *, Auto" Padding="20">
        <Grid Grid.Row="0" ColumnDefinitions="*, Auto" Margin="0,0,0,20">
            <VerticalStackLayout Grid.Column="0">
                <Label Text="Добро пожаловать," TextColor="Gray" FontSize="14"/>
                <Label x:Name="UserNameLabel" Text="Биохакер" TextColor="White" FontSize="24" FontAttributes="Bold"/>
            </VerticalStackLayout>
            
            <Button Grid.Column="1" 
                        Text="⚙️"
                        Clicked="OnProfileClicked"
                        HeightRequest="40" 
                        WidthRequest="40"
                        CornerRadius="20"
                        BackgroundColor="#333333"
                        Padding="0"/>
        </Grid>
        
        <CollectionView Grid.Row="1" x:Name="HormonesList">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Hormone">
                    <Border Stroke="Gray" StrokeThickness="1" BackgroundColor="#1E1E1E" Padding="15" Margin="0,0,0,10">
                        <Grid ColumnDefinitions="*, 100">
                            <VerticalStackLayout Grid.Column="0">
                                <Label Text="{Binding Name}" TextColor="White" FontSize="18" FontAttributes="Bold"/>
                                <Label Text="{Binding Reference.Unit, StringFormat='Ед: {0}'}" TextColor="Gray" FontSize="12"/>
                                <Label TextColor="#80CBC4" FontSize="12">
                                    <Label.FormattedText>
                                        <FormattedString>
                                            <Span Text="Норма: "/>
                                            <Span Text="{Binding Reference.Min}"/>
                                            <Span Text=" - "/>
                                            <Span Text="{Binding Reference.Max}"/>
                                        </FormattedString>
                                    </Label.FormattedText>
                                </Label>
                            </VerticalStackLayout>
                            
                            <Entry Grid.Column="1" 
                                   Text="{Binding UserInputValue}"
                                   Placeholder="0.0"
                                   Keyboard="Numeric"
                                   BackgroundColor="#333333"
                                   TextColor="White"
                                   HorizontalTextAlignment="Center"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
        <Button Grid.Row="2" Text="Рассчитать результаты" Clicked="OnAnalyzeClicked" 
                BackgroundColor="#4CAF50" TextColor="White" HeightRequest="50" CornerRadius="10" Margin="0,10,0,0"/>
    </Grid>
</ContentPage>

========================================
File: MainPage.xaml.cs
========================================
using BioLogicNative.Models;
using System.Collections.ObjectModel;
using BioLogicNative; // For ResultPage

namespace MauiProject;

public partial class MainPage : ContentPage
{
    // KnowledgeBase is static, so we don't instantiate it.
    // private KnowledgeBase kb = new KnowledgeBase(); 

    public MainPage()
    {
        InitializeComponent();
        LoadData();
    }

    protected override void OnAppearing()
    {
        base.OnAppearing();
        // Читаем имя из памяти
        string name = Preferences.Get("UserName", "Биохакер");
        if (UserNameLabel != null) // Safety check
            UserNameLabel.Text = name;
    }

    private async void OnProfileClicked(object sender, EventArgs e)
    {
        // Возможность вернуться к настройкам
        await Navigation.PushAsync(new BioPage());
    }

    private async void LoadData()
    {
        await KnowledgeBase.LoadAsync();
        ApplyPersonalization();
        HormonesList.ItemsSource = KnowledgeBase.Hormones;
    }

    private void ApplyPersonalization()
    {
        // 1. Считываем данные профиля
        string activity = Preferences.Get("ActivityLevel", "Medium"); // Low, Medium, High
        bool hasStress = Preferences.Get("HasStress", false); // Если есть такая настройка
        int age = Preferences.Get("UserAge", 30);

        // 2. Проходимся по гормонам и меняем нормы
        foreach (var hormone in KnowledgeBase.Hormones)
        {
            // --- ЛОГИКА ДЛЯ ТЕСТОСТЕРОНА (ID: h_001) ---
            if (hormone.Id == "h_001")
            {
                // Если Атлет (High Activity) -> повышаем требования к минимуму
                // Атлету нужно больше топлива для восстановления
                if (activity == "High")
                {
                    hormone.Reference.Min += 5.0; // Было 20, станет 25
                    hormone.Description += " (Норма повышена из-за спорта)";
                }
                
                // С возрастом планка чуть падает (реализм), но мы биохакеры, держим её!
                // Но если старше 50, можно чуть смягчить (-2)
                if (age > 50) 
                {
                    hormone.Reference.Min -= 2.0;
                }
            }
            // --- ЛОГИКА ДЛЯ КОРТИЗОЛА (ID: h_004) ---
            if (hormone.Id == "h_004")
            {
                // Если у человека хронический стресс, его "норма" смещена вверх.
                // Мы не хотим пугать его красными флагами на пустом месте.
                if (hasStress)
                {
                    hormone.Reference.Max += 50.0; // Даем "скидку" на стресс
                    hormone.Description += " (Учет фактора стресса)";
                }
            }
        }
    }

    private async void OnAnalyzeClicked(object sender, EventArgs e)
    {
        var problems = new List<Hormone>();
        var allHormones = HormonesList.ItemsSource as List<Hormone>;
        
        if (allHormones == null) return;
        
        // 1. Базовая проверка (выход за рамки)
        foreach (var hormone in allHormones)
        {
            if (double.TryParse(hormone.UserInputValue?.Replace('.', ','), out double value))
            {
                if (value > hormone.Reference.Max || value < hormone.Reference.Min)
                {
                    problems.Add(hormone);
                }
            }
        }

        // 2. УМНАЯ ЛОГИКА (Перекрестный анализ)
        var smartDiagnoses = CheckSmartRules(allHormones);
        problems.InsertRange(0, smartDiagnoses); // Добавляем умные советы в самый верх

        if (problems.Count == 0)
        {
            await DisplayAlert("Отлично", "Все показатели в идеале! Вы — машина.", "OK");
        }
        else
        {
            await Navigation.PushAsync(new ResultPage(problems));
        }
    }

    // "Мозг" приложения
    private List<Hormone> CheckSmartRules(List<Hormone> source)
    {
        var list = new List<Hormone>();

        // Хелпер для получения значения по ID
        double GetVal(string id) 
        {
            var h = source.FirstOrDefault(x => x.Id == id);
            if (h != null && double.TryParse(h.UserInputValue?.Replace('.', ','), out double v)) return v;
            return -1; // Если не найдено или пусто
        }

        double test = GetVal("h_001"); // Тестостерон
        double e2 = GetVal("h_002");   // Эстрадиол
        double prl = GetVal("h_003");  // Пролактин
        double cort = GetVal("h_004"); // Кортизол
        double shbg = GetVal("h_005"); // ГСПГ

        // ПРАВИЛО 1: Ароматизация (Тест низкий, Эстро высокий)
        // Мужчина превращается в женщину гормонально
        if (test > 0 && test < 20 && e2 > 130)
        {
            list.Add(new Hormone
            {
                Name = "⚠️ КРИТИЧЕСКАЯ АРОМАТИЗАЦИЯ",
                Description = "Ваш Тестостерон конвертируется в Эстрадиол. Опасно!",
                Solutions = new Solutions
                {
                    Physics = new() { "Срочно снизить % жира (жир ароматизирует)", "Убрать любой алкоголь" },
                    Supplements = new() { "Ингибиторы Ароматазы (Анастрозол) - к врачу!", "Цинк 50мг", "DIM 200мг" },
                    Psychology = new() { "Контроль истеричности" }
                }
            });
        }

        // ПРАВИЛО 2: Пролактиновый блок
        if (test > 0 && test < 20 && prl > 300)
        {
            list.Add(new Hormone
            {
                Name = "⚠️ ПРОЛАКТИНОВАЯ ЯМА",
                Description = "Высокий Пролактин подавляет выработку Тестостерона.",
                Solutions = new Solutions
                {
                    Physics = new() { "Исключить пиво", "Секс вместо мастурбации", "Сон в темноте" },
                    Supplements = new() { "Каберголин (Достинекс) - строго с врачом", "Витекс", "Витамин B6 (P-5-P)" },
                    Psychology = new() { "Убрать позицию жертвы" }
                }
            });
        }

        // ПРАВИЛО 3: Ловушка ГСПГ (Теста много, но он связан)
        if (test > 25 && shbg > 50)
        {
            list.Add(new Hormone
            {
                Name = "⚠️ СВЯЗАННЫЙ ТЕСТОСТЕРОН",
                Description = "Общий тест высокий, но ГСПГ украл его. Свободный тест низкий.",
                Solutions = new Solutions
                {
                    Physics = new() { "Повысить инсулин (больше углей)", "Больше белка" },
                    Supplements = new() { "Бор (Boron) 10мг", "Корень крапивы (Nettle Root)", "Магний" },
                    Psychology = new() { "Расслабление" }
                }
            });
        }
        
        return list;
    }
}

========================================
File: MauiProgram.cs
========================================
using Microsoft.Extensions.Logging;

namespace MauiProject;

public static class MauiProgram
{
	public static MauiApp CreateMauiApp()
	{
		var builder = MauiApp.CreateBuilder();
		builder
			.UseMauiApp<App>()
			.ConfigureFonts(fonts =>
			{
				fonts.AddFont("OpenSans-Regular.ttf", "OpenSansRegular");
				fonts.AddFont("OpenSans-Semibold.ttf", "OpenSansSemibold");
			});

#if DEBUG
		builder.Logging.AddDebug();
#endif

		return builder.Build();
	}
}

========================================
File: Models/Hormone.cs
========================================
using System.Text.Json.Serialization;

namespace BioLogicNative.Models;

public class KnowledgeBaseData
{
    [JsonPropertyName("hormone_master_data")]
    public List<Hormone> HormoneMasterData { get; set; }
}

public class Hormone
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }

    [JsonPropertyName("reference")]
    public ReferenceRange Reference { get; set; }

    [JsonPropertyName("solutions")]
    public Solutions Solutions { get; set; } = new();

    [JsonIgnore]
    public string UserInputValue { get; set; }

    [JsonIgnore]
    public bool IsExpanded { get; set; }
}

public class ReferenceRange
{
    [JsonPropertyName("min")]
    public double Min { get; set; }

    [JsonPropertyName("max")]
    public double Max { get; set; }

    [JsonPropertyName("unit")]
    public string Unit { get; set; }
}

public class Solutions
{
    [JsonPropertyName("physics")]
    public List<string> Physics { get; set; } = new();

    [JsonPropertyName("psychology")]
    public List<string> Psychology { get; set; } = new();

    [JsonPropertyName("supplements")]
    public List<string> Supplements { get; set; } = new();
}

========================================
File: Models/KnowledgeBase.cs
========================================
using System.Text.Json;

namespace BioLogicNative.Models;

public static class KnowledgeBase
{
    public static List<Hormone> Hormones { get; set; } = new();

    public static async Task LoadAsync()
    {
        try 
        {
            using var stream = await FileSystem.OpenAppPackageFileAsync("app_data.json");
            using var reader = new StreamReader(stream);
            var contents = await reader.ReadToEndAsync();
            
            var options = new JsonSerializerOptions
            {
                PropertyNameCaseInsensitive = true
            };
            var data = JsonSerializer.Deserialize<KnowledgeBaseData>(contents, options);
            
            Hormones = data?.HormoneMasterData ?? new List<Hormone>();
        }
        catch (Exception ex)
        {
            await Shell.Current.DisplayAlert("ÐžÑˆÐ¸Ð±ÐºÐ°", "Ð¤Ð°Ð¹Ð» app_data.json Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ Ð¸Ð»Ð¸ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½: " + ex.Message, "ÐžÐš");
        }
    }
}

========================================
File: Models/SymptomWrapper.cs
========================================
namespace BioLogicNative.Models;

public class SymptomWrapper
{
    public string Text { get; set; }
    public string Type { get; set; } // "Deficiency" "Excess"
    public Hormone ParentHormone { get; set; }
}

========================================
File: Models/UserProfile.cs
========================================
namespace BioLogicNative.Models;

public class UserProfile
{
    public string Name { get; set; }
    public int Age { get; set; }
    public double Weight { get; set; }
    public string Gender { get; set; } // "Male" or "Female"
    public string ActivityLevel { get; set; } // "Low", "Medium", "High"
    public List<string> BadHabits { get; set; } = new();
}

========================================
File: Platforms/Android/MainActivity.cs
========================================
using Android.App;
using Android.Content.PM;
using Android.OS;

namespace MauiProject;

[Activity(Theme = "@style/Maui.SplashTheme", MainLauncher = true, LaunchMode = LaunchMode.SingleTop, ConfigurationChanges = ConfigChanges.ScreenSize | ConfigChanges.Orientation | ConfigChanges.UiMode | ConfigChanges.ScreenLayout | ConfigChanges.SmallestScreenSize | ConfigChanges.Density)]
public class MainActivity : MauiAppCompatActivity
{
}

========================================
File: Platforms/Android/MainApplication.cs
========================================
using Android.App;
using Android.Runtime;

namespace MauiProject;

[Application]
public class MainApplication : MauiApplication
{
	public MainApplication(IntPtr handle, JniHandleOwnership ownership)
		: base(handle, ownership)
	{
	}

	protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();
}

========================================
File: Platforms/MacCatalyst/AppDelegate.cs
========================================
using Foundation;

namespace MauiProject;

[Register("AppDelegate")]
public class AppDelegate : MauiUIApplicationDelegate
{
	protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();
}

========================================
File: Platforms/MacCatalyst/Program.cs
========================================
using ObjCRuntime;
using UIKit;

namespace MauiProject;

public class Program
{
	// This is the main entry point of the application.
	static void Main(string[] args)
	{
		// if you want to use a different Application Delegate class from "AppDelegate"
		// you can specify it here.
		UIApplication.Main(args, null, typeof(AppDelegate));
	}
}

========================================
File: Platforms/Windows/App.xaml
========================================
<maui:MauiWinUIApplication
    x:Class="MauiProject.WinUI.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:maui="using:Microsoft.Maui"
    xmlns:local="using:MauiProject.WinUI">

</maui:MauiWinUIApplication>

========================================
File: Platforms/Windows/App.xaml.cs
========================================
using Microsoft.UI.Xaml;

// To learn more about WinUI, the WinUI project structure,
// and more about our project templates, see: http://aka.ms/winui-project-info.

namespace MauiProject.WinUI;

/// <summary>
/// Provides application-specific behavior to supplement the default Application class.
/// </summary>
public partial class App : MauiWinUIApplication
{
	/// <summary>
	/// Initializes the singleton application object.  This is the first line of authored code
	/// executed, and as such is the logical equivalent of main() or WinMain().
	/// </summary>
	public App()
	{
		this.InitializeComponent();
	}

	protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();
}


========================================
File: Platforms/iOS/AppDelegate.cs
========================================
using Foundation;

namespace MauiProject;

[Register("AppDelegate")]
public class AppDelegate : MauiUIApplicationDelegate
{
	protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();
}

========================================
File: Platforms/iOS/Program.cs
========================================
using ObjCRuntime;
using UIKit;

namespace MauiProject;

public class Program
{
	// This is the main entry point of the application.
	static void Main(string[] args)
	{
		// if you want to use a different Application Delegate class from "AppDelegate"
		// you can specify it here.
		UIApplication.Main(args, null, typeof(AppDelegate));
	}
}

========================================
File: Resources/Styles/Colors.xaml
========================================
<?xml version="1.0" encoding="UTF-8" ?>
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <!-- Note: For Android please see also Platforms\Android\Resources\values\colors.xml -->

    <Color x:Key="Primary">#512BD4</Color>
    <Color x:Key="PrimaryDark">#ac99ea</Color>
    <Color x:Key="PrimaryDarkText">#242424</Color>
    <Color x:Key="Secondary">#DFD8F7</Color>
    <Color x:Key="SecondaryDarkText">#9880e5</Color>
    <Color x:Key="Tertiary">#2B0B98</Color>

    <Color x:Key="White">White</Color>
    <Color x:Key="Black">Black</Color>
    <Color x:Key="Magenta">#D600AA</Color>
    <Color x:Key="MidnightBlue">#190649</Color>
    <Color x:Key="OffBlack">#1f1f1f</Color>

    <Color x:Key="Gray100">#E1E1E1</Color>
    <Color x:Key="Gray200">#C8C8C8</Color>
    <Color x:Key="Gray300">#ACACAC</Color>
    <Color x:Key="Gray400">#919191</Color>
    <Color x:Key="Gray500">#6E6E6E</Color>
    <Color x:Key="Gray600">#404040</Color>
    <Color x:Key="Gray900">#212121</Color>
    <Color x:Key="Gray950">#141414</Color>

    <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource Primary}"/>
    <SolidColorBrush x:Key="SecondaryBrush" Color="{StaticResource Secondary}"/>
    <SolidColorBrush x:Key="TertiaryBrush" Color="{StaticResource Tertiary}"/>
    <SolidColorBrush x:Key="WhiteBrush" Color="{StaticResource White}"/>
    <SolidColorBrush x:Key="BlackBrush" Color="{StaticResource Black}"/>

    <SolidColorBrush x:Key="Gray100Brush" Color="{StaticResource Gray100}"/>
    <SolidColorBrush x:Key="Gray200Brush" Color="{StaticResource Gray200}"/>
    <SolidColorBrush x:Key="Gray300Brush" Color="{StaticResource Gray300}"/>
    <SolidColorBrush x:Key="Gray400Brush" Color="{StaticResource Gray400}"/>
    <SolidColorBrush x:Key="Gray500Brush" Color="{StaticResource Gray500}"/>
    <SolidColorBrush x:Key="Gray600Brush" Color="{StaticResource Gray600}"/>
    <SolidColorBrush x:Key="Gray900Brush" Color="{StaticResource Gray900}"/>
    <SolidColorBrush x:Key="Gray950Brush" Color="{StaticResource Gray950}"/>
</ResourceDictionary>
========================================
File: Resources/Styles/Styles.xaml
========================================
<?xml version="1.0" encoding="UTF-8" ?>
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <Style TargetType="ActivityIndicator">
        <Setter Property="Color" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
    </Style>

    <Style TargetType="IndicatorView">
        <Setter Property="IndicatorColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray500}}"/>
        <Setter Property="SelectedIndicatorColor" Value="{AppThemeBinding Light={StaticResource Gray950}, Dark={StaticResource Gray100}}"/>
    </Style>

    <Style TargetType="Border">
        <Setter Property="Stroke" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray500}}" />
        <Setter Property="StrokeShape" Value="Rectangle"/>
        <Setter Property="StrokeThickness" Value="1"/>
    </Style>

    <Style TargetType="BoxView">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource Gray950}, Dark={StaticResource Gray200}}" />
    </Style>

    <Style TargetType="Button">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource PrimaryDarkText}}" />
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}" />
        <Setter Property="FontFamily" Value="OpenSansRegular"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="BorderWidth" Value="0"/>
        <Setter Property="CornerRadius" Value="8"/>
        <Setter Property="Padding" Value="14,10"/>
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray950}, Dark={StaticResource Gray200}}" />
                            <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="PointerOver" />
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="CheckBox">
        <Setter Property="Color" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="Color" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="DatePicker">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource White}}" />
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="FontFamily" Value="OpenSansRegular"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray500}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="Editor">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}" />
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="FontFamily" Value="OpenSansRegular"/>
        <Setter Property="FontSize" Value="14" />
        <Setter Property="PlaceholderColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray500}}" />
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="Entry">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}" />
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="FontFamily" Value="OpenSansRegular"/>
        <Setter Property="FontSize" Value="14" />
        <Setter Property="PlaceholderColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray500}}" />
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="ImageButton">
        <Setter Property="Opacity" Value="1" />
        <Setter Property="BorderColor" Value="Transparent"/>
        <Setter Property="BorderWidth" Value="0"/>
        <Setter Property="CornerRadius" Value="0"/>
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="Opacity" Value="0.5" />
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="PointerOver" />
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="Label">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}" />
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="FontFamily" Value="OpenSansRegular" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="Label" x:Key="Headline">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource MidnightBlue}, Dark={StaticResource White}}" />
        <Setter Property="FontSize" Value="32" />
        <Setter Property="HorizontalOptions" Value="Center" />
        <Setter Property="HorizontalTextAlignment" Value="Center" />
    </Style>

    <Style TargetType="Label" x:Key="SubHeadline">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource MidnightBlue}, Dark={StaticResource White}}" />
        <Setter Property="FontSize" Value="24" />
        <Setter Property="HorizontalOptions" Value="Center" />
        <Setter Property="HorizontalTextAlignment" Value="Center" />
    </Style>

    <Style TargetType="Picker">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource White}}" />
        <Setter Property="TitleColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource Gray200}}" />
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="FontFamily" Value="OpenSansRegular"/>
        <Setter Property="FontSize" Value="14" />
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                            <Setter Property="TitleColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="ProgressBar">
        <Setter Property="ProgressColor" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="ProgressColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="RadioButton">
        <Setter Property="BackgroundColor" Value="Transparent"/>
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}" />
        <Setter Property="FontFamily" Value="OpenSansRegular"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="RefreshView">
        <Setter Property="RefreshColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource Gray200}}" />
    </Style>

    <Style TargetType="SearchBar">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource White}}" />
        <Setter Property="PlaceholderColor" Value="{StaticResource Gray500}" />
        <Setter Property="CancelButtonColor" Value="{StaticResource Gray500}" />
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="FontFamily" Value="OpenSansRegular" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                            <Setter Property="PlaceholderColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="SearchHandler">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource White}}" />
        <Setter Property="PlaceholderColor" Value="{StaticResource Gray500}" />
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="FontFamily" Value="OpenSansRegular" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                            <Setter Property="PlaceholderColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="Shadow">
        <Setter Property="Radius" Value="15" />
        <Setter Property="Opacity" Value="0.5" />
        <Setter Property="Brush" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource White}}" />
        <Setter Property="Offset" Value="10,10" />
    </Style>

    <Style TargetType="Slider">
        <Setter Property="MinimumTrackColor" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
        <Setter Property="MaximumTrackColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}" />
        <Setter Property="ThumbColor" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="MinimumTrackColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"/>
                            <Setter Property="MaximumTrackColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"/>
                            <Setter Property="ThumbColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"/>
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="SwipeItem">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Black}}" />
    </Style>

    <Style TargetType="Switch">
        <Setter Property="OnColor" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
        <Setter Property="ThumbColor" Value="{StaticResource White}" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="OnColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                            <Setter Property="ThumbColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="On">
                        <VisualState.Setters>
                            <Setter Property="OnColor" Value="{AppThemeBinding Light={StaticResource Secondary}, Dark={StaticResource Gray200}}" />
                            <Setter Property="ThumbColor" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="Off">
                        <VisualState.Setters>
                            <Setter Property="ThumbColor" Value="{AppThemeBinding Light={StaticResource Gray400}, Dark={StaticResource Gray500}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <Style TargetType="TimePicker">
        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource White}}" />
        <Setter Property="BackgroundColor" Value="Transparent"/>
        <Setter Property="FontFamily" Value="OpenSansRegular"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="MinimumHeightRequest" Value="44"/>
        <Setter Property="MinimumWidthRequest" Value="44"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>
  
    <!--
    <Style TargetType="TitleBar">
        <Setter Property="MinimumHeightRequest" Value="32"/>
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="TitleActiveStates">
                    <VisualState x:Name="TitleBarTitleActive">
                        <VisualState.Setters>
                            <Setter Property="BackgroundColor" Value="Transparent" />
                            <Setter Property="ForegroundColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}" />
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="TitleBarTitleInactive">
                        <VisualState.Setters>
                            <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Black}}" />
                            <Setter Property="ForegroundColor" Value="{AppThemeBinding Light={StaticResource Gray400}, Dark={StaticResource Gray500}}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>
    -->

    <Style TargetType="Page" ApplyToDerivedTypes="True">
        <Setter Property="Padding" Value="0"/>
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource OffBlack}}" />
    </Style>

    <Style TargetType="Shell" ApplyToDerivedTypes="True">
        <Setter Property="Shell.BackgroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource OffBlack}}" />
        <Setter Property="Shell.ForegroundColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource SecondaryDarkText}}" />
        <Setter Property="Shell.TitleColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource SecondaryDarkText}}" />
        <Setter Property="Shell.DisabledColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray950}}" />
        <Setter Property="Shell.UnselectedColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray200}}" />
        <Setter Property="Shell.NavBarHasShadow" Value="False" />
        <Setter Property="Shell.TabBarBackgroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Black}}" />
        <Setter Property="Shell.TabBarForegroundColor" Value="{AppThemeBinding Light={StaticResource Magenta}, Dark={StaticResource White}}" />
        <Setter Property="Shell.TabBarTitleColor" Value="{AppThemeBinding Light={StaticResource Magenta}, Dark={StaticResource White}}" />
        <Setter Property="Shell.TabBarUnselectedColor" Value="{AppThemeBinding Light={StaticResource Gray900}, Dark={StaticResource Gray200}}" />
    </Style>

    <Style TargetType="NavigationPage">
        <Setter Property="BarBackgroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource OffBlack}}" />
        <Setter Property="BarTextColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource White}}" />
        <Setter Property="IconColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource White}}" />
    </Style>

    <Style TargetType="TabbedPage">
        <Setter Property="BarBackgroundColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray950}}" />
        <Setter Property="BarTextColor" Value="{AppThemeBinding Light={StaticResource Magenta}, Dark={StaticResource White}}" />
        <Setter Property="UnselectedTabColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray950}}" />
        <Setter Property="SelectedTabColor" Value="{AppThemeBinding Light={StaticResource Gray950}, Dark={StaticResource Gray200}}" />
    </Style>

</ResourceDictionary>

========================================
File: ResultPage.xaml
========================================
<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:BioLogicNative.Models"
             x:Class="BioLogicNative.ResultPage"
             BackgroundColor="#121212"
             Shell.NavBarIsVisible="False">
<Grid RowDefinitions="Auto, *, Auto" Padding="15,20,15,20">
    
    <Label Grid.Row="0" 
           Text="Ð’Ð°ÑˆÐ¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹" 
           FontSize="28" 
           FontAttributes="Bold" 
           TextColor="White" 
           Margin="0,0,0,15"/>
    <CollectionView Grid.Row="1" x:Name="ResultsList" SelectionMode="None" ItemsSource="{Binding DetectedHormones}">
        <CollectionView.ItemTemplate>
            <DataTemplate x:DataType="models:Hormone">
                <Border Stroke="Transparent" 
                        StrokeShape="RoundRectangle 15" 
                        BackgroundColor="#1E1E1E" 
                        Margin="0,0,0,15"
                        Padding="15">
                    
                    <VerticalStackLayout Spacing="10">
                        <Grid ColumnDefinitions="*" BackgroundColor="Transparent">
                            <VerticalStackLayout Grid.Column="0">
                                <Label Text="{Binding Name}" 
                                       FontSize="22" 
                                       FontAttributes="Bold" 
                                       TextColor="#4CC2FF"/>
                                <Label Text="{Binding Description}" 
                                       FontSize="14" 
                                       TextColor="White" 
                                       LineBreakMode="WordWrap"/>
                            </VerticalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>
    <Button Grid.Row="2"
            Text="Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ð¸ Ð² ÐœÐµÐ½ÑŽ"
            Clicked="OnHomeClicked"
            BackgroundColor="#333333"
            TextColor="White"
            CornerRadius="25"
            HeightRequest="50"
            FontAttributes="Bold"/>
</Grid>
</ContentPage>

========================================
File: ResultPage.xaml.cs
========================================
using BioLogicNative.Models;
using System.Collections.ObjectModel;

namespace BioLogicNative;

public partial class ResultPage : ContentPage
{
    public ObservableCollection<Hormone> DetectedHormones { get; set; } = new();

    public ResultPage()
    {
        InitializeComponent();
        BindingContext = this;
    }

    public ResultPage(List<Hormone> problems) : this()
    {
        DetectedHormones.Clear();
        foreach (var p in problems)
        {
            DetectedHormones.Add(p);
        }
        ResultsList.ItemsSource = DetectedHormones;
    }

    private async void OnHomeClicked(object sender, EventArgs e)
    {
        await Navigation.PopToRootAsync();
    }

    private void OnItemTapped(object sender, TappedEventArgs e)
    {
        var hormone = e.Parameter as Hormone;
        if (hormone == null) return;

        hormone.IsExpanded = !hormone.IsExpanded;

        // Ð¥Ð°Ðº Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ UI
        var currentList = ResultsList.ItemsSource;
        ResultsList.ItemsSource = null;
        ResultsList.ItemsSource = currentList;
    }
}

========================================
File: StartPage.xaml
========================================
<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BioLogicNative.StartPage"
             BackgroundColor="#121212"
             Title="Start">

    <Grid>
        <VerticalStackLayout Spacing="20" VerticalOptions="Center" HorizontalOptions="Center">
            
            <Label Text="Health PWA" 
                   FontSize="40" 
                   FontAttributes="Bold" 
                   TextColor="#4CC2FF"
                   HorizontalOptions="Center" />
            
            <BoxView HeightRequest="2" WidthRequest="150" Color="#4CC2FF" HorizontalOptions="Center" Margin="0,-10,0,0"/>

            <Label Text="Ð¢Ð²Ð¾Ñ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð±Ð¸Ð¾Ñ…Ð°ÐºÐ¸Ð½Ð³-ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ" 
                   TextColor="Gray" 
                   FontAttributes="Italic"
                   HorizontalOptions="Center" />

            <Button Text="ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÑƒ" 
                    Clicked="OnStartClicked"
                    BackgroundColor="#4CC2FF" 
                    TextColor="Black" 
                    CornerRadius="25"
                    HeightRequest="50"
                    WidthRequest="250"
                    Margin="0,40,0,0"
                    FontAttributes="Bold" />

        </VerticalStackLayout>
    </Grid>

</ContentPage>

========================================
File: StartPage.xaml.cs
========================================
using MauiProject; // For MainPage

namespace BioLogicNative;

public partial class StartPage : ContentPage
{
	public StartPage()
	{
		InitializeComponent();
	}

    private async void OnStartClicked(object sender, EventArgs e)
    {
        // ÐŸÐµÑ€ÐµÑ…Ð¾Ð´ Ð½Ð° Ð³Ð»Ð°Ð²Ð½ÑƒÑŽ (MainPage)
        await Shell.Current.GoToAsync(nameof(MainPage));
    }
}

========================================
File: SummaryPage.xaml
========================================
<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:BioLogicNative.Models"
             x:Class="BioLogicNative.SummaryPage"
             BackgroundColor="#121212"
             Title="Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚">

    <Grid RowDefinitions="Auto, *, Auto" Padding="20" RowSpacing="20">
        
        <!-- Header -->
        <Label Text="Ð”Ð¸Ð°Ð³Ð½Ð¾Ð· ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½" 
               FontSize="28" 
               FontAttributes="Bold" 
               TextColor="White"
               HorizontalOptions="Center" />

        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="25">
                
                <!-- Strategy Block -->
                <Frame x:Name="StrategyFrame" BackgroundColor="#2D2D2D" CornerRadius="15" BorderColor="Transparent" Padding="15">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Ð’ÐÐ–ÐÐž: ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹" 
                               TextColor="White" 
                               FontAttributes="Bold" 
                               FontSize="18"/>
                        
                        <Label x:Name="StrategyLabel"
                               Text="ÐÐ½Ð°Ð»Ð¸Ð· Ð²Ð·Ð°Ð¸Ð¼Ð¾ÑÐ²ÑÐ·ÐµÐ¹..." 
                               TextColor="#FFA000" 
                               FontSize="16" />
                    </VerticalStackLayout>
                </Frame>

                <!-- List of Violations -->
                <Label Text="ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ð´ÐµÑ„Ð¸Ñ†Ð¸Ñ‚Ñ‹:" TextColor="Gray" FontSize="14"/>
                
                <CollectionView x:Name="DetectedList">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:Hormone">
                            <Frame BackgroundColor="#1E1E1E" CornerRadius="10" Padding="15,10" Margin="0,0,0,10" BorderColor="Transparent">
                                <Label Text="{Binding Name}" TextColor="White" FontSize="16" FontAttributes="Bold"/>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Button -->
        <Button Grid.Row="2"
                Text="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ð»ÐµÑ‡ÐµÐ½Ð¸Ñ" 
                Clicked="OnOpenProtocolClicked"
                BackgroundColor="#00E676" 
                TextColor="Black" 
                FontAttributes="Bold" 
                CornerRadius="25" 
                HeightRequest="50"
                Margin="0,0,0,20"/>
    </Grid>

</ContentPage>

========================================
File: SummaryPage.xaml.cs
========================================
using BioLogicNative.Models;
using System.Text.Json;
using System.Linq;
using System.Text;

namespace BioLogicNative;

[QueryProperty(nameof(Results), "Results")]
public partial class SummaryPage : ContentPage
{
    private List<Hormone> _results;
    public List<Hormone> Results
    {
        get => _results;
        set
        {
            _results = value;
            DetectedList.ItemsSource = _results;
            GenerateStrategy();
        }
    }

    public SummaryPage()
    {
        InitializeComponent();
    }

    private void GenerateStrategy()
    {
        if (Results == null || !Results.Any()) return;
        
        // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¸Ð¼ÐµÐ½ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð½Ñ‹Ñ… Ð³Ð¾Ñ€Ð¼Ð¾Ð½Ð¾Ð² Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð¿Ð¾Ð¸ÑÐºÐ°
        var defects = Results.Select(h => h.Name).ToHashSet();
        var strategyBuilder = new StringBuilder();
        bool hasCritical = false;

        // --- Ð¡Ð’Ð¯Ð—ÐšÐ 1: ÐšÐžÐ Ð¢Ð˜Ð—ÐžÐ› (ÐšÐ¾Ñ€Ð¾Ð»ÑŒ ÑÑ‚Ñ€ÐµÑÑÐ°) ---
        // Ð•ÑÐ»Ð¸ Ð²Ñ‹ÑÐ¾Ðº ÐšÐ¾Ñ€Ñ‚Ð¸Ð·Ð¾Ð», Ð¾Ð½ Ð»Ð¾Ð¼Ð°ÐµÑ‚ Ð¿Ð¾Ñ‡Ñ‚Ð¸ Ð²ÑÑ‘.
        if (defects.Contains("ÐšÐ¾Ñ€Ñ‚Ð¸Ð·Ð¾Ð»"))
        {
            hasCritical = true;
            if (defects.Contains("Ð¢ÐµÑÑ‚Ð¾ÑÑ‚ÐµÑ€Ð¾Ð½"))
            {
                strategyBuilder.AppendLine("ðŸ”´ ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜Ð™ ÐšÐžÐÐ¤Ð›Ð˜ÐšÐ¢: Ð¡Ñ‚Ñ€ÐµÑÑ (ÐšÐ¾Ñ€Ñ‚Ð¸Ð·Ð¾Ð») Ñ„Ð¸Ð·Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð¾Ð´Ð°Ð²Ð»ÑÐµÑ‚ Ð²Ñ‹Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¢ÐµÑÑ‚Ð¾ÑÑ‚ÐµÑ€Ð¾Ð½Ð°. Ð›ÑŽÐ±Ñ‹Ðµ Ð±ÑƒÑÑ‚ÐµÑ€Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ Ð±ÐµÑÐ¿Ð¾Ð»ÐµÐ·Ð½Ñ‹, Ð¿Ð¾ÐºÐ° Ð²Ñ‹ Ð½Ðµ ÑÐ½Ð¸Ð·Ð¸Ñ‚Ðµ ÑÑ‚Ñ€ÐµÑÑÐ¾Ð²ÑƒÑŽ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ. ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ñ Ñ€ÐµÐ¶Ð¸Ð¼Ð° ÑÐ½Ð° Ð¸ Ð¼Ð°Ð³Ð½Ð¸Ñ.");
            }
            else if (defects.Contains("ÐÐ´Ñ€ÐµÐ½Ð°Ð»Ð¸Ð½ / ÐÐ¾Ñ€Ð°Ð´Ñ€ÐµÐ½Ð°Ð»Ð¸Ð½"))
            {
                strategyBuilder.AppendLine("ðŸ”´ Ð¡Ð˜ÐÐ”Ð ÐžÐœ Ð’Ð«Ð“ÐžÐ ÐÐÐ˜Ð¯: Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹ ÐšÐ¾Ñ€Ñ‚Ð¸Ð·Ð¾Ð» Ð¿Ñ€Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ñ… Ñ ÐÐ´Ñ€ÐµÐ½Ð°Ð»Ð¸Ð½Ð¾Ð¼ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ Ð¾Ð± Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð¸Ð¸ Ð½Ð°Ð´Ð¿Ð¾Ñ‡ÐµÑ‡Ð½Ð¸ÐºÐ¾Ð². Ð’Ð°Ð¼ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸ Ð—ÐÐŸÐ Ð•Ð©Ð•ÐÐ« ÑÑ‚Ð¸Ð¼ÑƒÐ»ÑÑ‚Ð¾Ñ€Ñ‹ (ÐºÐ¾Ñ„ÐµÐ¸Ð½, Ð¿Ñ€ÐµÐ´Ñ‚Ñ€ÐµÐ½Ð¸ÐºÐ¸). Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¼ÑÐ³ÐºÐ¾Ðµ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ.");
            }
            else
            {
                strategyBuilder.AppendLine("âš ï¸ ÐšÐžÐ Ð¢Ð˜Ð—ÐžÐ› ÐŸÐ•Ð Ð’Ð˜Ð§Ð•Ð: Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ ÑÑ‚Ñ€ÐµÑÑÐ° ÑÐ²Ð»ÑÐµÑ‚ÑÑ ÐºÐ¾Ñ€Ð½ÐµÐ¼ Ð²Ð°ÑˆÐ¸Ñ… Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼. Ð¡Ð½Ð¸Ð¶ÐµÐ½Ð¸Ðµ ÐºÐ¾Ñ€Ñ‚Ð¸Ð·Ð¾Ð»Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ð¸.");
            }
            strategyBuilder.AppendLine(); // ÐžÑ‚ÑÑ‚ÑƒÐ¿
        }

        // --- Ð¡Ð’Ð¯Ð—ÐšÐ 2: ÐŸÐ ÐžÐ›ÐÐšÐ¢Ð˜Ð (Ð¢Ð¾Ñ€Ð¼Ð¾Ð· ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹) ---
        if (defects.Contains("ÐŸÑ€Ð¾Ð»Ð°ÐºÑ‚Ð¸Ð½") && !strategyBuilder.ToString().Contains("ÐŸÑ€Ð¾Ð»Ð°ÐºÑ‚Ð¸Ð½"))
        {
            hasCritical = true;
            if (defects.Contains("Ð¢ÐµÑÑ‚Ð¾ÑÑ‚ÐµÑ€Ð¾Ð½"))
            {
                strategyBuilder.AppendLine("ðŸ”´ Ð‘Ð›ÐžÐšÐ˜Ð ÐžÐ’ÐšÐ Ð¢Ð•Ð¡Ð¢ÐžÐ¡Ð¢Ð•Ð ÐžÐÐ: Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹ ÐŸÑ€Ð¾Ð»Ð°ÐºÑ‚Ð¸Ð½ Ð¼ÐµÑ…Ð°Ð½Ð¸Ñ‡ÐµÑÐºÐ¸ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚ ÑÐ¸Ð³Ð½Ð°Ð» Ð¼Ð¾Ð·Ð³Ð° Ðº Ð²Ñ‹Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð¢ÐµÑÑ‚Ð¾ÑÑ‚ÐµÑ€Ð¾Ð½Ð°. ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ â„–1 â€” ÑÐ½Ð¸Ð·Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð»Ð°ÐºÑ‚Ð¸Ð½ (Ð’Ð¸Ñ‚Ð°Ð¼Ð¸Ð½ B6, Ð’Ð¸Ñ‚ÐµÐºÑ, ÑÐ½Ð¸Ð¶ÐµÐ½Ð¸Ðµ ÑÑ‚Ñ€ÐµÑÑÐ°).");
            }
            else if (defects.Contains("Ð”Ð¾Ñ„Ð°Ð¼Ð¸Ð½"))
            {
                strategyBuilder.AppendLine("âš ï¸ Ð”ÐžÐ¤ÐÐœÐ˜Ð-ÐŸÐ ÐžÐ›ÐÐšÐ¢Ð˜Ð: Ð­Ñ‚Ð¾ Ð³Ð¾Ñ€Ð¼Ð¾Ð½Ñ‹-Ð°Ð½Ñ‚Ð°Ð³Ð¾Ð½Ð¸ÑÑ‚Ñ‹. ÐÐ¸Ð·ÐºÐ¸Ð¹ Ð”Ð¾Ñ„Ð°Ð¼Ð¸Ð½ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ ÐŸÑ€Ð¾Ð»Ð°ÐºÑ‚Ð¸Ð½Ñƒ Ñ€Ð°ÑÑ‚Ð¸. ÐŸÐ¾Ð²Ñ‹ÑˆÐµÐ½Ð¸Ðµ Ð´Ð¾Ñ„Ð°Ð¼Ð¸Ð½Ð° (Ñ…Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ð¹ Ð´ÑƒÑˆ, Ñ‚Ð¸Ñ€Ð¾Ð·Ð¸Ð½, Ð¿Ð¾Ð±ÐµÐ´Ñ‹) ÐµÑÑ‚ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼ ÑÐ½Ð¸Ð·Ð¸Ñ‚ Ð¿Ñ€Ð¾Ð»Ð°ÐºÑ‚Ð¸Ð½.");
            }
            else
            {
                strategyBuilder.AppendLine("âš ï¸ Ð¤ÐÐšÐ¢ÐžÐ  ÐŸÐ ÐžÐ›ÐÐšÐ¢Ð˜ÐÐ: Ð­Ñ‚Ð¾Ñ‚ Ð³Ð¾Ñ€Ð¼Ð¾Ð½ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð¼ Ð² Ñ€ÐµÐ¶Ð¸Ð¼ 'ÑÐ¿ÑÑ‡ÐºÐ¸' Ð¸ Ð¿Ð¾Ð´Ð°Ð²Ð»ÑÐµÑ‚ Ð»Ð¸Ð±Ð¸Ð´Ð¾. Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿Ñ€Ð¸Ñ†ÐµÐ»ÑŒÐ½Ð¾Ð¹ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ†Ð¸Ð¸.");
            }
            strategyBuilder.AppendLine();
        }

        // --- Ð¡Ð’Ð¯Ð—ÐšÐ 3: Ð­Ð¡Ð¢Ð ÐÐ”Ð˜ÐžÐ› (ÐÑ€Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ) ---
        if (defects.Contains("Ð­ÑÑ‚Ñ€Ð°Ð´Ð¸Ð¾Ð»") && defects.Contains("Ð¢ÐµÑÑ‚Ð¾ÑÑ‚ÐµÑ€Ð¾Ð½"))
        {
            hasCritical = true;
            strategyBuilder.AppendLine("ðŸŸ  ÐÐ ÐžÐœÐÐ¢Ð˜Ð—ÐÐ¦Ð˜Ð¯: Ð’Ð°Ñˆ Ð¢ÐµÑÑ‚Ð¾ÑÑ‚ÐµÑ€Ð¾Ð½, Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾, Ð¿Ñ€ÐµÐ²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ÑÑ Ð² Ð­ÑÑ‚Ñ€Ð°Ð´Ð¸Ð¾Ð» (Ñ‡Ð°ÑÑ‚Ð¾ Ð¸Ð·-Ð·Ð° Ð»Ð¸ÑˆÐ½ÐµÐ³Ð¾ Ð²ÐµÑÐ° Ð¸Ð»Ð¸ Ð´ÐµÑ„Ð¸Ñ†Ð¸Ñ‚Ð° Ñ†Ð¸Ð½ÐºÐ°). ÐÑƒÐ¶Ð½Ñ‹ Ð¸Ð½Ð³Ð¸Ð±Ð¸Ñ‚Ð¾Ñ€Ñ‹ Ð°Ñ€Ð¾Ð¼Ð°Ñ‚Ð°Ð·Ñ‹ (Ð¦Ð¸Ð½Ðº, DIM, Ð‘Ñ€Ð¾ÐºÐºÐ¾Ð»Ð¸), Ð¸Ð½Ð°Ñ‡Ðµ Ð¿Ð¾Ð²Ñ‹ÑˆÐµÐ½Ð¸Ðµ Ð¢ÐµÑÑ‚Ð¾ÑÑ‚ÐµÑ€Ð¾Ð½Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑƒÑ…ÑƒÐ´ÑˆÐ¸Ñ‚ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑŽ.");
            strategyBuilder.AppendLine();
        }

        // --- Ð¡Ð’Ð¯Ð—ÐšÐ 4: Ð¡Ð•Ð ÐžÐ¢ÐžÐÐ˜Ð vs Ð”ÐžÐ¤ÐÐœÐ˜Ð ---
        if (defects.Contains("Ð¡ÐµÑ€Ð¾Ñ‚Ð¾Ð½Ð¸Ð½") && defects.Contains("Ð”Ð¾Ñ„Ð°Ð¼Ð¸Ð½"))
        {
            strategyBuilder.AppendLine("ðŸ”µ Ð”Ð˜Ð¡Ð‘ÐÐ›ÐÐÐ¡ ÐÐ•Ð™Ð ÐžÐœÐ•Ð”Ð˜ÐÐ¢ÐžÐ ÐžÐ’: Ð£ Ð²Ð°Ñ Ð¿Ñ€Ð¾ÑÐ°Ð´ÐºÐ° Ð¸ Ð¿Ð¾ 'ÐºÐ°Ð¹Ñ„Ñƒ' (Ð”Ð¾Ñ„Ð°Ð¼Ð¸Ð½), Ð¸ Ð¿Ð¾ 'ÑÑ‡Ð°ÑÑ‚ÑŒÑŽ' (Ð¡ÐµÑ€Ð¾Ñ‚Ð¾Ð½Ð¸Ð½). Ð­Ñ‚Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð°Ð¿Ð°Ñ‚Ð¸Ð¸. Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ñ Ð±Ð°Ð·Ñ‹: ÑÐ¾Ð½ + Ð¿Ð¸Ñ‚Ð°Ð½Ð¸Ðµ, Ð·Ð°Ñ‚ÐµÐ¼ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ 5-HTP (Ð²ÐµÑ‡ÐµÑ€) Ð¸ Ð¢Ð¸Ñ€Ð¾Ð·Ð¸Ð½ (ÑƒÑ‚Ñ€Ð¾).");
            strategyBuilder.AppendLine();
        }

        // --- Ð•Ð¡Ð›Ð˜ ÐÐ•Ð¢ Ð¡Ð›ÐžÐ–ÐÐ«Ð¥ Ð¡Ð’Ð¯Ð—ÐžÐš ---
        if (string.IsNullOrWhiteSpace(strategyBuilder.ToString()))
        {
            // ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð±ÐµÑ€ÐµÐ¼ Ñ‚Ð¾Ð¿-1 Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ
            var topProblem = Results.First();
            strategyBuilder.AppendLine($"Ð’Ð°Ñˆ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ â€” {topProblem.Name}. {topProblem.Description}");
            strategyBuilder.AppendLine("ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ñ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¹ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð³Ð¾Ñ€Ð¼Ð¾Ð½Ð°.");
        }

        // Ð’Ñ‹Ð²Ð¾Ð´ Ð² UI
        StrategyLabel.Text = strategyBuilder.ToString().Trim();
        
        // ÐšÑ€Ð°ÑÐ¸Ð¼ Ñ€Ð°Ð¼ÐºÑƒ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ñ‚ÑÐ¶ÐµÑÑ‚Ð¸
        if (hasCritical)
        {
            // ÐšÑ€Ð°ÑÐ½Ð°Ñ/ÐžÑ€Ð°Ð½Ð¶ÐµÐ²Ð°Ñ Ñ€Ð°Ð¼ÐºÐ° Ð´Ð»Ñ ÑÐµÑ€ÑŒÐµÐ·Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼
            StrategyFrame.BorderColor = Colors.OrangeRed;
        }
        else
        {
            // Ð—ÐµÐ»ÐµÐ½Ð°Ñ/Ð¡Ð¸Ð½ÑÑ Ð´Ð»Ñ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ñ…
            StrategyFrame.BorderColor = Color.FromArgb("#4CC2FF");
        }
    }

    private async void OnOpenProtocolClicked(object sender, EventArgs e)
    {
        var navigationParameter = new Dictionary<string, object>
        {
            { "Results", _results }
        };
        await Shell.Current.GoToAsync(nameof(ResultPage), navigationParameter);
    }
}

========================================
File: WelcomePage.xaml
========================================
<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiProject.WelcomePage"
             BackgroundColor="#121212"
             Title="Welcome">

    <StackLayout VerticalOptions="Center" Spacing="20" Padding="30">
        
        <!-- Logo / Title -->
        <Label Text="BIOHACKER" 
               TextColor="#4CAF50" 
               FontSize="40" 
               FontAttributes="Bold" 
               HorizontalOptions="Center" 
               Margin="0,0,0,30"
               CharacterSpacing="2"/>

        <!-- Name Input -->
        <Border Stroke="#333333" BackgroundColor="#1E1E1E" StrokeShape="RoundRectangle 10" Padding="10,0">
            <Entry x:Name="NameEntry"
                   Placeholder="Ð’Ð°ÑˆÐµ Ð˜Ð¼Ñ" 
                   PlaceholderColor="#666666" 
                   TextColor="White"/>
        </Border>

        <!-- Age Input -->
        <Border Stroke="#333333" BackgroundColor="#1E1E1E" StrokeShape="RoundRectangle 10" Padding="10,0">
            <Entry x:Name="AgeEntry"
                   Placeholder="Ð’Ð¾Ð·Ñ€Ð°ÑÑ‚ (Ð»ÐµÑ‚)" 
                   PlaceholderColor="#666666" 
                   Keyboard="Numeric"
                   TextColor="White"/>
        </Border>

        <!-- Weight Input -->
        <Border Stroke="#333333" BackgroundColor="#1E1E1E" StrokeShape="RoundRectangle 10" Padding="10,0">
            <Entry x:Name="WeightEntry"
                   Placeholder="Ð’ÐµÑ (ÐºÐ³)" 
                   PlaceholderColor="#666666" 
                   Keyboard="Numeric"
                   TextColor="White"/>
        </Border>

        <!-- Next Button -->
        <Button Text="Ð”Ð°Ð»ÐµÐµ" 
                BackgroundColor="#6200EE" 
                TextColor="White" 
                CornerRadius="25" 
                HeightRequest="50" 
                FontAttributes="Bold"
                Margin="0,20,0,0"
                Clicked="OnNextClicked"/>

    </StackLayout>
</ContentPage>

========================================
File: WelcomePage.xaml.cs
========================================
namespace MauiProject;

public partial class WelcomePage : ContentPage
{
    public WelcomePage()
    {
        InitializeComponent();
    }

    private async void OnNextClicked(object sender, EventArgs e)
    {
        // Simple Validation
        if (string.IsNullOrWhiteSpace(NameEntry.Text) || 
            string.IsNullOrWhiteSpace(AgeEntry.Text) || 
            string.IsNullOrWhiteSpace(WeightEntry.Text))
        {
            await DisplayAlert("ÐžÑˆÐ¸Ð±ÐºÐ°", "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ð¿Ð¾Ð»Ñ", "ÐžÐš");
            return;
        }

        // Save preliminary data
        Preferences.Set("UserName", NameEntry.Text);
        if (int.TryParse(AgeEntry.Text, out int age)) Preferences.Set("UserAge", age);
        if (double.TryParse(WeightEntry.Text, out double weight)) Preferences.Set("UserWeight", weight);

        // Navigate to BioPage
        await Navigation.PushAsync(new BioPage());
    }
}

